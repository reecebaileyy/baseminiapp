query GetPoolManagers {
  poolManagers(first: 5) {
    id
    poolCount
    txCount
    totalVolumeUSD
  }
  bundles(first: 5) {
    id
    ethPriceUSD
  }
}

query GetTokenByAddress($id: ID!) {
  token(id: $id) {
    id
    symbol
    name
    decimals
    totalSupply
    volume
    volumeUSD
    untrackedVolumeUSD
    feesUSD
    txCount
    poolCount
    totalValueLocked
    totalValueLockedUSD
    totalValueLockedUSDUntracked
    derivedETH
  }
}

query GetTokenStats($tokenId: ID!, $dayDataFirst: Int!) {
  token(id: $tokenId) {
    id
    symbol
    name
    decimals
    totalSupply
    volume
    volumeUSD
    feesUSD
    txCount
    poolCount
    totalValueLockedUSD
    derivedETH
    tokenDayData(first: $dayDataFirst, orderBy: date, orderDirection: desc) {
      id
      date
      volume
      volumeUSD
      untrackedVolumeUSD
      totalValueLocked
      totalValueLockedUSD
      priceUSD
      feesUSD
      open
      high
      low
      close
    }
  }
}

query GetTokenHourData($tokenId: String!, $first: Int!) {
  tokenHourDatas(
    first: $first
    where: { token: $tokenId }
    orderBy: periodStartUnix
    orderDirection: desc
  ) {
    id
    periodStartUnix
    volume
    volumeUSD
    untrackedVolumeUSD
    totalValueLocked
    totalValueLockedUSD
    priceUSD
    feesUSD
    open
    high
    low
    close
  }
}

query GetNewPools($first: Int!, $orderBy: Pool_orderBy!, $orderDirection: OrderDirection!) {
  pools(
    first: $first
    orderBy: $orderBy
    orderDirection: $orderDirection
    where: { liquidity_gt: "0" }
  ) {
    id
    createdAtTimestamp
    createdAtBlockNumber
    token0 {
      id
      symbol
      name
      decimals
    }
    token1 {
      id
      symbol
      name
      decimals
    }
    feeTier
    liquidity
    sqrtPrice
    token0Price
    token1Price
    tick
    volumeToken0
    volumeToken1
    volumeUSD
    feesUSD
    txCount
    totalValueLockedToken0
    totalValueLockedToken1
    totalValueLockedUSD
    liquidityProviderCount
    poolDayData(first: 1, orderBy: date, orderDirection: desc) {
      id
      date
      volumeUSD
      feesUSD
      tvlUSD
    }
    poolHourData(first: 1, orderBy: periodStartUnix, orderDirection: desc) {
      id
      periodStartUnix
      volumeUSD
      feesUSD
      tvlUSD
    }
  }
}

# Combined query: Uniswap v4 (Base) + Aerodrome subgraph
query GetUniAndAero($tokenId: ID!, $aeroFirst: Int!) {
  # From your existing Uniswap v4 Base subgraph
  token(id: $tokenId) @source(name: "uniswap-v4-base-3") {
    id
    symbol
    name
    derivedETH
    totalValueLockedUSD
  }

  aeroPools: pools(first: $aeroFirst, orderBy: volumeUSD, orderDirection: desc)
    @source(name: "aerodrome-base-full") {
    id
    volumeUSD
    totalValueLockedUSD
    token0 { id symbol name }
    token1 { id symbol name }
  }
}